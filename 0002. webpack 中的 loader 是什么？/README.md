# ğŸ¤– AI

## ğŸ¤– è¯·ä»‹ç»ä¸€ä¸‹ webpack ä¸­çš„ loaderã€é€šä¹‰åƒé—® 2.5ã€‘

åœ¨ Webpack ä¸­ï¼ŒLoader æ˜¯ä¸€ç§ç”¨äºè½¬æ¢æ–‡ä»¶çš„å·¥å…·ã€‚å®ƒä»¬å…è®¸ä½ å¤„ç†å„ç§ä¸åŒç±»å‹çš„æ–‡ä»¶ï¼Œå¹¶å°†è¿™äº›æ–‡ä»¶è½¬æ¢ä¸ºæ¨¡å—ï¼Œä»è€Œå¯ä»¥åœ¨ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ç”¨ Loader å°† TypeScript ä»£ç ç¼–è¯‘æˆ JavaScriptï¼Œæˆ–è€…å°† SCSS æ–‡ä»¶ç¼–è¯‘æˆ CSSã€‚

æ¯ä¸ª Loader ä¸“æ³¨äºåšä¸€ä»¶äº‹æƒ…ï¼Œå¹¶ä¸”å¯ä»¥é“¾å¼è°ƒç”¨ã€‚Loader å¯ä»¥æŒ‰é¡ºåºæ‰§è¡Œï¼Œä»å³åˆ°å·¦æˆ–ä»ä¸‹åˆ°ä¸Šï¼ˆå–å†³äºé…ç½®æ–¹å¼ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥å¯¹èµ„æºè¿›è¡Œä¸€ç³»åˆ—çš„è½¬æ¢æ“ä½œã€‚

### å¸¸è§çš„ Loader ç±»å‹

1. **Babel Loader**:
   - ç”¨é€”ï¼šå°†ç°ä»£ JavaScript ä»£ç ï¼ˆå¦‚ ES6+ï¼‰è½¬è¯‘æˆå‘åå…¼å®¹çš„ç‰ˆæœ¬ã€‚
   - é…ç½®ç¤ºä¾‹ï¼š
     ```javascript
     module: {
       rules: [
         {
           test: /\.js$/,
           exclude: /node_modules/,
           use: {
             loader: 'babel-loader',
             options: {
               presets: ['@babel/preset-env']
             }
           }
         }
       ]
     }
     ```

2. **CSS Loader & Style Loader**:
   - ç”¨é€”ï¼š`css-loader` è§£æ CSS æ–‡ä»¶ä¸­çš„ `@import` å’Œ `url()` è¯­å¥ï¼Œè€Œ `style-loader` åˆ™å°† CSS æ³¨å…¥åˆ° DOM ä¸­ã€‚
   - é…ç½®ç¤ºä¾‹ï¼š
     ```javascript
     module: {
       rules: [
         {
           test: /\.css$/,
           use: ['style-loader', 'css-loader']
         }
       ]
     }
     ```

3. **Sass/SCSS Loader**:
   - ç”¨é€”ï¼šå°† Sass/SCSS æ–‡ä»¶ç¼–è¯‘æˆ CSSã€‚
   - é…ç½®ç¤ºä¾‹ï¼š
     ```javascript
     module: {
       rules: [
         {
           test: /\.s[ac]ss$/i,
           use: ['style-loader', 'css-loader', 'sass-loader']
         }
       ]
     }
     ```

4. **File Loader**:
   - ç”¨é€”ï¼šå°†æ–‡ä»¶è¾“å‡ºåˆ°æ–‡ä»¶ç³»ç»Ÿã€‚å¯¹äºå›¾ç‰‡ã€å­—ä½“ç­‰é™æ€èµ„æºå¾ˆæœ‰ç”¨ã€‚
   - é…ç½®ç¤ºä¾‹ï¼š
     ```javascript
     module: {
       rules: [
         {
           test: /\.(png|jpe?g|gif|svg|eot|ttf|woff|woff2)$/,
           use: [
             {
               loader: 'file-loader',
               options: {}
             }
           ]
         }
       ]
     }
     ```

5. **Url Loader**:
   - ç”¨é€”ï¼šç±»ä¼¼äº `file-loader`ï¼Œä½†å½“æ–‡ä»¶å¤§å°å°äºè®¾å®šçš„é™åˆ¶æ—¶ï¼Œå®ƒå¯ä»¥å°†æ–‡ä»¶ä½œä¸º Data URL å†…åµŒåˆ°ä»£ç ä¸­ã€‚
   - é…ç½®ç¤ºä¾‹ï¼š
     ```javascript
     module: {
       rules: [
         {
           test: /\.(png|jpe?g|gif|svg|eot|ttf|woff|woff2)$/,
           use: [
             {
               loader: 'url-loader',
               options: {
                 limit: 8192, // å°äº8KBçš„æ–‡ä»¶ä¼šå†…è”ä¸ºdata URL
               }
             }
           ]
         }
       ]
     }
     ```

### å¦‚ä½•æ·»åŠ  Loader

åœ¨ Webpack é…ç½®æ–‡ä»¶ï¼ˆé€šå¸¸æ˜¯ `webpack.config.js`ï¼‰ä¸­ï¼Œé€šè¿‡ `module.rules` æ¥å®šä¹‰ Loader çš„è§„åˆ™ã€‚ä¸€ä¸ªå…¸å‹çš„ Loader è§„åˆ™åŒ…æ‹¬ï¼š

- `test`: ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼ŒåŒ¹é…éœ€è¦å¤„ç†çš„æ–‡ä»¶ã€‚
- `use`: ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–å¯¹è±¡æ•°ç»„ï¼ŒæŒ‡å®šè¦ä½¿ç”¨çš„ Loader åŠå…¶é€‰é¡¹ã€‚
- `include`/`exclude`: ç”¨äºé™å®š Loader åº”ç”¨çš„èŒƒå›´ï¼Œé€šå¸¸ç”¨æ¥æ’é™¤ `node_modules` ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚

é€šè¿‡è¿™äº›é…ç½®ï¼ŒWebpack å°±èƒ½å¤Ÿè¯†åˆ«å¹¶æ­£ç¡®åœ°å¤„ç†å„ç§ç±»å‹çš„æ–‡ä»¶äº†ã€‚

## ğŸ¤– è¯·ä»‹ç»ä¸€ä¸‹ webpack ä¸­çš„ loaderã€é€šä¹‰åƒé—® 2.5 æ·±åº¦æœç´¢ã€‘

åœ¨ Webpack ä¸­ï¼ŒLoader æ˜¯ä¸€ç§è½¬æ¢å™¨ï¼Œå®ƒå…è®¸ä½ å°†ä¸åŒç±»å‹çš„æ–‡ä»¶è½¬æ¢ä¸ºæ¨¡å—ã€‚Webpack æœ¬èº«åªèƒ½ç†è§£ JavaScript å’Œ JSON æ¨¡å—ï¼Œä½†æ˜¯é€šè¿‡ Loaderï¼Œä½ å¯ä»¥è®© Webpack å¤„ç†å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œæ¯”å¦‚ CSSã€å›¾ç‰‡ã€å­—ä½“ç­‰ï¼Œå¹¶å°†å®ƒä»¬è½¬æ¢æˆå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„ JavaScript æ¨¡å—ã€‚

### Loader çš„åŸºæœ¬æ¦‚å¿µ

- **ä¸€åˆ‡çš†æ¨¡å—**ï¼šåœ¨ Webpack ä¸­ï¼Œæ‰€æœ‰èµ„æºéƒ½è¢«è§†ä¸ºæ¨¡å—ï¼Œè¿™åŒ…æ‹¬äº† JavaScript ä»£ç ã€CSS æ–‡ä»¶ã€å›¾ç‰‡ã€å­—ä½“ç­‰ç­‰ã€‚Loader å¯ä»¥å¤„ç†è¿™äº›é JavaScript èµ„æºï¼Œå°†å®ƒä»¬è½¬åŒ–ä¸º Webpack å¯ä»¥å¤„ç†çš„å½¢å¼ã€‚
- **å†…å®¹è½¬æ¢å™¨**ï¼šLoader å®é™…ä¸Šæ˜¯ä¸€ä¸ªå¯¼å‡ºå‡½æ•°çš„ JavaScript æ¨¡å—ã€‚è¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸€ä¸ªè¾“å…¥ï¼ˆé€šå¸¸æ˜¯æ–‡ä»¶çš„å†…å®¹ï¼‰ï¼Œå¹¶è¿”å›å¤„ç†åçš„ç»“æœã€‚
- **é“¾å¼è°ƒç”¨**ï¼šå¤šä¸ª Loader å¯ä»¥ç»„åˆèµ·æ¥å½¢æˆä¸€ä¸ªç®¡é“ï¼Œæ¯ä¸ª Loader éƒ½ä¼šä¾æ¬¡å¯¹å‰ä¸€ä¸ª Loader çš„è¾“å‡ºè¿›è¡Œå¤„ç†ã€‚è¿™ç§é“¾å¼è°ƒç”¨çš„æ–¹å¼éå¸¸çµæ´»ï¼Œå¯ä»¥å®ç°å¤æ‚çš„æ–‡ä»¶å¤„ç†æµç¨‹ã€‚
- **åŒæ­¥æˆ–å¼‚æ­¥**ï¼šLoader å¯ä»¥æ˜¯åŒæ­¥çš„ä¹Ÿå¯ä»¥æ˜¯å¼‚æ­¥çš„ã€‚åŒæ­¥ Loader ç›´æ¥è¿”å›å¤„ç†ç»“æœï¼Œè€Œå¼‚æ­¥ Loader åˆ™ä½¿ç”¨ `this.async()` æ–¹æ³•æ¥è·å–ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç”¨äºå¼‚æ­¥å¤„ç†å®Œæˆæ—¶è°ƒç”¨ã€‚

### å¦‚ä½•é…ç½® Loader

åœ¨ Webpack çš„é…ç½®æ–‡ä»¶ `webpack.config.js` ä¸­ï¼Œå¯ä»¥é€šè¿‡ `module.rules` å±æ€§æ¥å®šä¹‰ Loader è§„åˆ™ã€‚æ¯ä¸ªè§„åˆ™éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹å±æ€§ï¼š

- `test`: ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨æ¥åŒ¹é…éœ€è¦è¢«è¯¥è§„åˆ™å¤„ç†çš„æ–‡ä»¶ã€‚
- `use`: å®šä¹‰è¦ä½¿ç”¨çš„ Loaderã€‚å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼ˆå•ä¸ª Loaderï¼‰æˆ–ä¸€ä¸ªæ•°ç»„ï¼ˆå¤šä¸ª Loaderï¼‰ã€‚å½“ä½¿ç”¨å¤šä¸ª Loader æ—¶ï¼Œæ•°ç»„ä¸­çš„ Loader ä¼šæŒ‰ç…§ä»å³åˆ°å·¦çš„é¡ºåºæ‰§è¡Œã€‚
- `include`/`exclude`: ç”¨æ¥æŒ‡å®šåº”è¯¥åº”ç”¨æˆ–æ’é™¤å“ªäº›ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚
- `options`: å¯ä»¥ä¼ é€’ç»™ Loader çš„é¢å¤–é€‰é¡¹ã€‚

ä¾‹å¦‚ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„é…ç½®ï¼Œå®ƒä½¿ç”¨ `babel-loader` æ¥è½¬è¯‘ ES6+ çš„ JavaScript ä»£ç ï¼Œå¹¶ä¸”åªé’ˆå¯¹ `src` ç›®å½•ä¸‹çš„ `.js` æ–‡ä»¶ç”Ÿæ•ˆï¼ŒåŒæ—¶å¿½ç•¥ `node_modules` ä¸‹çš„æ–‡ä»¶ï¼š

```javascript
module: {
  rules: [
    {
      test: /\.js$/,
      include: /src/,
      exclude: /node_modules/,
      use: {
        loader: 'babel-loader',
        options: {
          presets: ['@babel/preset-env']
        }
      }
    }
  ]
}
```

### å¸¸è§çš„ Loader

- **babel-loader**: å°†ç°ä»£ JavaScript ä»£ç è½¬è¯‘æˆå‘åå…¼å®¹çš„ç‰ˆæœ¬ã€‚
- **css-loader**: è§£æ CSS æ–‡ä»¶ä¸­çš„ `@import` å’Œ `url()` è¯­å¥ã€‚
- **style-loader**: å°† CSS æ³¨å…¥åˆ° DOM ä¸­ã€‚
- **file-loader/url-loader**: å¤„ç†å›¾ç‰‡å’Œå­—ä½“ç­‰é™æ€èµ„æºï¼Œå°†æ–‡ä»¶å¤åˆ¶åˆ°æ„å»ºç›®å½•æˆ–ç”Ÿæˆ Data URLã€‚
- **sass-loader**: ç¼–è¯‘ SASS/SCSS æ–‡ä»¶ã€‚
- **less-loader**: ç¼–è¯‘ LESS æ–‡ä»¶ã€‚
- **ts-loader/babel-loader with @babel/preset-typescript**: å¤„ç† TypeScript ä»£ç ã€‚
- **eslint-loader**: åœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­æ£€æŸ¥ JavaScript ä»£ç é£æ ¼ã€‚

é€šè¿‡åˆç†é…ç½® Loaderï¼Œä½ å¯ä»¥æ„å»ºå‡ºä¸€ä¸ªå¼ºå¤§çš„å‰ç«¯å¼€å‘ç¯å¢ƒï¼Œæ”¯æŒå¤šç§è¯­è¨€å’Œèµ„æºç±»å‹ï¼Œæ»¡è¶³é¡¹ç›®çš„éœ€æ±‚ã€‚å¦‚æœä½ æƒ³è¦æ·±å…¥äº†è§£æŸä¸ªç‰¹å®šçš„ Loader æˆ–è€…å¦‚ä½•ç¼–å†™è‡ªå®šä¹‰ Loaderï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£æˆ–è€…å…¶ä»–å¼€å‘è€…ç¼–å†™çš„æ•™ç¨‹ã€‚